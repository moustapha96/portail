import{u as o,i as p,j as e,S as m,L as h,P as u}from"./index.CYLRWMMU.js";import{b as r,L as f}from"./vendor.CrEiiG9O.js";const i=s=>s?new Date(s).toLocaleDateString("fr-FR"):"—",j={active:{label:"Actif",cls:"bg-emerald-100 text-emerald-700"},expired:{label:"Expiré",cls:"bg-red-100 text-red-700"},draft:{label:"Brouillon",cls:"bg-gray-100 text-gray-700"},cancelled:{label:"Annulé",cls:"bg-zinc-100 text-zinc-700"},terminated:{label:"Résilié",cls:"bg-gray-100 text-gray-700"}};function y({state:s}){const a=(s||"").toLowerCase(),l=j[a]||{label:s||"—",cls:"bg-gray-100 text-gray-700"};return e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${l.cls}`,children:l.label})}function N(){const{user:s}=o(),a=s?.partner_id,[l,d]=r.useState([]),[x,n]=r.useState(!0);return r.useEffect(()=>{window.scrollTo(0,0)},[]),r.useEffect(()=>{let t=!0;return(async()=>{try{if(!a){n(!1);return}const c=await p.listByPartner(a);t&&d(Array.isArray(c)?c:[])}finally{t&&n(!1)}})(),()=>{t=!1}},[a]),e.jsxs(e.Fragment,{children:[e.jsx(m,{title:"Mes contrats"}),e.jsx(h,{childrenClasses:"pt-0 pb-0",children:e.jsxs("div",{className:"about-page-wrapper w-full",children:[e.jsx("div",{className:"title-area w-full",children:e.jsx(u,{title:"Mes contrats",breadcrumb:[{name:"Accueil",path:"/"},{name:"Profil",path:"/profile"}]})}),e.jsx("div",{className:"aboutus-wrapper w-full",children:e.jsx("div",{className:"container-x mx-auto p-4",children:e.jsx("div",{className:"bg-white border rounded",children:x?e.jsx("div",{className:"p-4 text-sm text-gray-500",children:"Chargement…"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-2 px-3",children:"Code"}),e.jsx("th",{className:"text-left py-2 px-3",children:"Local"}),e.jsx("th",{className:"text-left py-2 px-3",children:"Période"}),e.jsx("th",{className:"text-left py-2 px-3",children:"Statut"}),e.jsx("th",{className:"text-right py-2 px-3",children:"Action"})]})}),e.jsxs("tbody",{children:[l.map(t=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2 px-3",children:t.name||`#${t.id}`}),e.jsx("td",{className:"py-2 px-3",children:t.property_name||"—"}),e.jsxs("td",{className:"py-2 px-3",children:[i(t.start_date)," → ",i(t.end_date)]}),e.jsx("td",{className:"py-2 px-3",children:e.jsx(y,{state:t.state})}),e.jsx("td",{className:"py-2 px-3 text-right",children:e.jsx(f,{to:`/contrats/${t.id}`,className:"px-3 py-1 bg-yellow-400 hover:bg-yellow-500 transition rounded",children:"Détails"})})]},t.id)),l.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"py-3 px-3",colSpan:5,children:"Aucun contrat."})})]})]})})})})})]})})]})}export{N as default};
