import{u as g,k as j,j as e,S as f,L as b,P as y}from"./index.CYLRWMMU.js";import{b as l,L as m}from"./vendor.CrEiiG9O.js";const N=(a,r="XOF")=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:r}).format(Number(a||0)),v=a=>a?new Date(a).toLocaleDateString("fr-FR"):"—",p={rented:{label:"Loué",cls:"bg-emerald-100 text-emerald-700"},available:{label:"Disponible",cls:"bg-gray-100 text-gray-700"},reserved:{label:"Réservé",cls:"bg-amber-100 text-amber-700"},maintenance:{label:"Maintenance",cls:"bg-blue-100 text-blue-700"}};function w({status:a}){const r=(a||"").toLowerCase(),t=p[r]||{label:a||"—",cls:"bg-gray-100 text-gray-700"};return e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${t.cls}`,children:t.label})}function _(){const{user:a}=g(),r=a?.partner_id,[t,n]=l.useState([]),[o,x]=l.useState(!0);l.useEffect(()=>{window.scrollTo(0,0)},[]),l.useEffect(()=>{let s=!0;return(async()=>{try{if(!r){n([]);return}const i=await j.listByPartner(r);s&&n(Array.isArray(i)?i:[])}catch{s&&n([])}finally{s&&x(!1)}})(),()=>{s=!1}},[r]);const u=l.useMemo(()=>t[0]?.currency||"XOF",[t]),c=l.useMemo(()=>{const s=t.length,i=t.filter(d=>(d.status||"").toLowerCase()==="rented").length,h=t.filter(d=>(d.status||"").toLowerCase()==="available").length;return{total:s,rented:i,available:h}},[t]);return e.jsxs(e.Fragment,{children:[e.jsx(f,{title:"Mes locaux"}),e.jsx(b,{childrenClasses:"pt-0 pb-0",children:e.jsxs("div",{className:"about-page-wrapper w-full",children:[e.jsx("div",{className:"title-area w-full",children:e.jsx(y,{title:"Mes locaux",breadcrumb:[{name:"Accueil",path:"/"},{name:"Profil",path:"/profile"}]})}),e.jsx("div",{className:"aboutus-wrapper w-full",children:e.jsxs("div",{className:"container-x mx-auto p-4 space-y-4",children:[e.jsx("section",{className:"bg-white border rounded p-4",children:o?e.jsx("div",{className:"animate-pulse text-sm text-gray-500",children:"Chargement…"}):e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Total"}),e.jsx("div",{className:"font-medium",children:c.total})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Loués"}),e.jsx("div",{className:"font-medium",children:c.rented})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"Disponibles"}),e.jsx("div",{className:"font-medium",children:c.available})]})]})}),e.jsx("section",{className:"w-full",children:o?e.jsx("div",{className:"bg-white border rounded p-4 text-sm text-gray-500",children:"Chargement…"}):t.length===0?e.jsx("div",{className:"bg-white border rounded p-6 text-sm text-gray-600",children:"Aucun local."}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:t.map(s=>e.jsxs("div",{className:"border rounded p-3 bg-white",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:s.name||"—"}),e.jsx("div",{className:"text-xs text-gray-500",children:s.building_name||"—"})]}),e.jsx(w,{status:s.status})]}),e.jsxs("dl",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-500",children:"Loyer mensuel"}),e.jsx("dd",{className:"font-medium",children:N(s.monthly_rent,s.currency||u)})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-500",children:"Surface"}),e.jsx("dd",{className:"font-medium",children:s.area?`${s.area} m²`:"—"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("dt",{className:"text-gray-500",children:"Dernière mise à jour"}),e.jsx("dd",{className:"font-medium",children:v(s.updated_at||s.write_date)})]})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[e.jsx(m,{className:"underline",to:`/locaux/${s.id}`,children:"Détails"}),s.contract_id&&e.jsx(m,{className:"text-sm text-blue-600 underline",to:`/contrats/${s.contract_id}`,children:"Voir contrat"})]})]},s.id))})})]})})]})})]})}export{_ as default};
