import{j as e,L as N,d as v,e as d,f as p}from"./index.CYLRWMMU.js";import{c as w,b as o,L as C}from"./vendor.CrEiiG9O.js";function L(){const t="#487a43",b="#3e6c3b";w();const[m,u]=o.useState(!1),[r,l]=o.useState("email"),[n,h]=o.useState(""),[i,x]=o.useState(""),[a,y]=o.useState({email:"",phoneNumber:""}),g=()=>{const s={email:r==="email"&&!n?"L'adresse email est obligatoire.":"",phoneNumber:r==="sms"&&!i?"Le numéro de téléphone est obligatoire.":""};return y(s),!Object.values(s).some(Boolean)},j=async s=>{if(s.preventDefault(),!g()){d.error("Veuillez remplir tous les champs obligatoires.",{position:"top-center",autoClose:4e3});return}u(!0);try{r==="email"?await p.resetPasswordMail(n.trim()):await p.resetPasswordBySMS(i.trim()),d.success(`Le lien de réinitialisation a été envoyé par ${r==="email"?"email":"SMS"}.`,{position:"top-center",autoClose:5e3}),h(""),x(""),l("email")}catch(c){console.error("Erreur lors de la réinitialisation:",c);const f=c?.response?.data?.message||c?.message||"Une erreur s'est produite. Veuillez réessayer.";d.error(f,{position:"top-center",autoClose:5e3})}finally{u(!1)}};return e.jsx(N,{childrenClasses:"pt-0 pb-0",children:e.jsx("div",{className:"w-full flex items-start justify-center px-4 py-10 bg-gray-50",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-14 h-14 rounded-full mx-auto flex items-center justify-center shadow-sm",style:{backgroundColor:t},"aria-hidden":!0,children:e.jsx("svg",{viewBox:"0 0 24 24",className:"w-7 h-7 text-white",fill:"currentColor",children:e.jsx("path",{d:"M12 3l9 8h-3v8h-5v-5H11v5H6v-8H3l9-8z"})})}),e.jsx("h1",{className:"mt-3 text-2xl font-bold",style:{color:t},children:"Mot de passe oublié"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Choisissez comment recevoir votre lien de réinitialisation"})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 border border-gray-200 dark:border-gray-700 rounded-lg shadow-md",children:e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsx("div",{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{type:"button",onClick:()=>l("email"),className:`flex items-center space-x-2 border rounded-md p-3 text-left ${r==="email"?"bg-[rgba(72,122,67,0.06)]":"bg-white"}`,style:{borderColor:r==="email"?t:"#e5e7eb"},children:[e.jsx("input",{type:"radio",id:"email-option",name:"contactMethod",value:"email",checked:r==="email",readOnly:!0,className:"h-4 w-4",style:{accentColor:t}}),e.jsx("label",{htmlFor:"email-option",className:"cursor-pointer w-full",children:"Par email"})]}),e.jsxs("button",{type:"button",onClick:()=>l("sms"),className:`flex items-center space-x-2 border rounded-md p-3 text-left ${r==="sms"?"bg-[rgba(72,122,67,0.06)]":"bg-white"}`,style:{borderColor:r==="sms"?t:"#e5e7eb"},children:[e.jsx("input",{type:"radio",id:"sms-option",name:"contactMethod",value:"sms",checked:r==="sms",readOnly:!0,className:"h-4 w-4",style:{accentColor:t}}),e.jsx("label",{htmlFor:"sms-option",className:"cursor-pointer w-full",children:"Par SMS"})]})]})}),r==="email"?e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block mb-2 text-sm font-medium text-gray-900",children:"Adresse email"}),e.jsx("input",{id:"email",type:"email",value:n,onChange:s=>h(s.target.value),placeholder:"nom@exemple.com",className:"w-full px-3 py-2 border rounded-md focus:outline-none",style:{borderColor:a.email?"#ef4444":"#d1d5db",boxShadow:"none"},onFocus:s=>s.currentTarget.style.boxShadow=`0 0 0 2px ${t}33`,onBlur:s=>s.currentTarget.style.boxShadow="none"}),a.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.email})]}):e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block mb-2 text-sm font-medium text-gray-900",children:"Numéro de téléphone (Sénégal)"}),e.jsx("input",{id:"phone",type:"tel",value:i,onChange:s=>x(s.target.value),placeholder:"771234567",pattern:"^(70|76|77|78|79)[0-9]{7}$",maxLength:9,minLength:9,className:"w-full px-3 py-2 border rounded-md focus:outline-none",style:{borderColor:a.phoneNumber?"#ef4444":"#d1d5db",boxShadow:"none"},onFocus:s=>s.currentTarget.style.boxShadow=`0 0 0 2px ${t}33`,onBlur:s=>s.currentTarget.style.boxShadow="none"}),a.phoneNumber&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.phoneNumber})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("button",{type:"submit",disabled:m,className:"w-full flex items-center justify-center text-white font-medium py-2.5 px-4 rounded-md focus:outline-none transition disabled:opacity-60",style:{backgroundColor:t},onMouseEnter:s=>s.currentTarget.style.backgroundColor=b,onMouseLeave:s=>s.currentTarget.style.backgroundColor=t,children:m?e.jsxs(e.Fragment,{children:[e.jsx(v,{className:"mr-2 h-4 w-4 animate-spin"}),e.jsx("span",{children:"Envoi…"})]}):"Envoyer le lien de réinitialisation"}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-white dark:text-gray-600",children:["Vous avez déjà un compte ?",e.jsx(C,{to:"/login",className:"ml-2 underline",style:{color:t},children:"Se connecter"})]})})]})]})})]})})})}export{L as default};
